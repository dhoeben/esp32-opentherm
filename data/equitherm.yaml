substitutions:
  eq_n: !secret eq_n
  eq_k: !secret eq_k
  eq_t: !secret eq_t

sensor:
  # --- Outdoor temperature (weather from HA) ---
  - platform: homeassistant
    entity_id: !secret weather_entity
    attribute: temperature
    id: ha_outdoor_temp
    internal: true
    unit_of_measurement: "째C"
    accuracy_decimals: 1
    filters:
      - lambda: |-
          if (isnan(x)) return 10.0f;  // fallback if no weather data
          return x;

  # --- Indoor target (climate setpoint from HA) ---
  - platform: homeassistant
    entity_id: climate.living_room
    attribute: temperature
    id: ha_target_temp
    internal: true
    unit_of_measurement: "째C"
    accuracy_decimals: 1
    filters:
      - lambda: |-
          if (isnan(x) || x < 5.0f) return 21.0f;  // fallback to 21째C
          return x;

  # --- Indoor actual temperature (feedback) ---
  - platform: homeassistant
    entity_id: !secret indoor_entity
    id: ha_indoor_temp
    internal: true
    unit_of_measurement: "째C"
    accuracy_decimals: 1
    filters:
      - lambda: |-
          if (isnan(x)) return 21.0f;  // fallback if missing
          return x;
